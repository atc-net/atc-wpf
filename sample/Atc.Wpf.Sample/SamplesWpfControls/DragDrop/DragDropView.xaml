<UserControl
    x:Class="Atc.Wpf.Sample.SamplesWpfControls.DragDrop.DragDropView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:atc="https://github.com/atc-net/atc-wpf/tree/main/schemas"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Atc.Wpf.Sample.SamplesWpfControls.DragDrop"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DataContext="{d:DesignInstance local:DragDropViewModel}"
    d:DesignHeight="700"
    d:DesignWidth="900"
    mc:Ignorable="d">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="10">

            <!--  Demo 1: Reorder within a single list  -->
            <GroupBox Margin="0,0,0,10" Header="Demo 1: Reorder within a single list">
                <ListBox
                    MinHeight="160"
                    Margin="10"
                    atc:DragDropAttach.IsDragSource="True"
                    atc:DragDropAttach.IsDropTarget="True"
                    ItemsSource="{Binding ReorderItems}" />
            </GroupBox>

            <!--  Demo 2: Cross-list transfer  -->
            <GroupBox Margin="0,0,0,10" Header="Demo 2: Cross-list transfer">
                <atc:GridEx
                    Margin="10"
                    Columns="*,*"
                    Rows="Auto,*">
                    <TextBlock FontWeight="SemiBold" Text="Source" />
                    <TextBlock
                        Grid.Column="1"
                        FontWeight="SemiBold"
                        Text="Target" />
                    <ListBox
                        Grid.Row="1"
                        MinHeight="140"
                        Margin="0,4,5,0"
                        atc:DragDropAttach.IsDragSource="True"
                        atc:DragDropAttach.IsDropTarget="True"
                        ItemsSource="{Binding SourceItems}" />
                    <ListBox
                        Grid.Row="1"
                        Grid.Column="1"
                        MinHeight="140"
                        Margin="5,4,0,0"
                        atc:DragDropAttach.IsDragSource="True"
                        atc:DragDropAttach.IsDropTarget="True"
                        ItemsSource="{Binding TargetItems}" />
                </atc:GridEx>
            </GroupBox>

            <!--  Demo 3: File drop zone  -->
            <GroupBox Margin="0,0,0,10" Header="Demo 3: File drop from Explorer">
                <ListBox
                    MinHeight="100"
                    Margin="10"
                    atc:DragDropAttach.IsDropTarget="True"
                    ItemsSource="{Binding DroppedFiles}">
                    <ListBox.Style>
                        <Style BasedOn="{StaticResource {x:Type ListBox}}" TargetType="ListBox">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding DroppedFiles.Count}" Value="0">
                                    <Setter Property="Background">
                                        <Setter.Value>
                                            <VisualBrush Stretch="None">
                                                <VisualBrush.Visual>
                                                    <TextBlock
                                                        Foreground="Gray"
                                                        Opacity="0.6"
                                                        Text="Drop files here from Explorer" />
                                                </VisualBrush.Visual>
                                            </VisualBrush>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ListBox.Style>
                </ListBox>
            </GroupBox>

            <!--  Demo 4: Custom drop handler with filtering  -->
            <GroupBox Margin="0,0,0,10" Header="Demo 4: Custom IDropHandler (only 'Allowed' items accepted)">
                <atc:GridEx
                    Margin="10"
                    Columns="*,*"
                    Rows="Auto,*">
                    <TextBlock FontWeight="SemiBold" Text="Available (drag from here)" />
                    <TextBlock
                        Grid.Column="1"
                        FontWeight="SemiBold"
                        Text="Accepted (drop here)" />
                    <ListBox
                        Grid.Row="1"
                        MinHeight="140"
                        Margin="0,4,5,0"
                        atc:DragDropAttach.IsDragSource="True"
                        ItemsSource="{Binding FilteredItems}" />
                    <ListBox
                        Grid.Row="1"
                        Grid.Column="1"
                        MinHeight="140"
                        Margin="5,4,0,0"
                        atc:DragDropAttach.IsDropTarget="True"
                        atc:DragDropAttach.DropHandler="{Binding}"
                        ItemsSource="{Binding AcceptedItems}" />
                </atc:GridEx>
            </GroupBox>

        </StackPanel>
    </ScrollViewer>

</UserControl>
