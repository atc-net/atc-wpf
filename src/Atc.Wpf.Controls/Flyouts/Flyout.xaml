<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:flyouts="clr-namespace:Atc.Wpf.Controls.Flyouts">

    <!--  Pin button style  -->
    <Style x:Key="AtcApps.Styles.Flyout.PinButton" TargetType="{x:Type ToggleButton}">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="BorderBrush" Value="Transparent" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="Focusable" Value="True" />
        <Setter Property="Height" Value="32" />
        <Setter Property="HorizontalContentAlignment" Value="Center" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="ToolTip" Value="Pin (keep open)" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Width" Value="32" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Grid Background="{TemplateBinding Background}">
                        <Ellipse
                            x:Name="HoverCircle"
                            Fill="{DynamicResource AtcApps.Brushes.Gray8}"
                            Opacity="0" />
                        <Path
                            x:Name="PinIcon"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Data="M 5,0 L 5,7 L 3,7 L 3,9 L 7,9 L 7,7 L 5,7 M 2,0 L 8,0 L 8,2 L 2,2 Z"
                            Fill="{DynamicResource AtcApps.Brushes.Gray2}"
                            RenderTransformOrigin="0.5,0.5"
                            SnapsToDevicePixels="True">
                            <Path.RenderTransform>
                                <RotateTransform Angle="0" />
                            </Path.RenderTransform>
                        </Path>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="HoverCircle" Property="Opacity" Value="1" />
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="HoverCircle" Property="Fill" Value="{DynamicResource AtcApps.Brushes.Gray6}" />
                        </Trigger>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="PinIcon" Property="RenderTransform">
                                <Setter.Value>
                                    <RotateTransform Angle="-45" />
                                </Setter.Value>
                            </Setter>
                            <Setter TargetName="PinIcon" Property="Fill" Value="{DynamicResource AtcApps.Brushes.Accent}" />
                            <Setter Property="ToolTip" Value="Unpin" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="PinIcon" Property="Fill" Value="{DynamicResource AtcApps.Brushes.Gray6}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--  Resize grip style  -->
    <Style x:Key="AtcApps.Styles.Flyout.ResizeGrip" TargetType="{x:Type Thumb}">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Cursor" Value="SizeWE" />
        <Setter Property="Width" Value="6" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Thumb}">
                    <Grid Background="{TemplateBinding Background}">
                        <Rectangle
                            x:Name="GripIndicator"
                            Width="2"
                            Height="24"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Fill="{DynamicResource AtcApps.Brushes.Gray6}"
                            Opacity="0"
                            RadiusX="1"
                            RadiusY="1" />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="GripIndicator" Property="Opacity" Value="1" />
                        </Trigger>
                        <Trigger Property="IsDragging" Value="True">
                            <Setter TargetName="GripIndicator" Property="Fill" Value="{DynamicResource AtcApps.Brushes.Accent}" />
                            <Setter TargetName="GripIndicator" Property="Opacity" Value="1" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--  Close button style  -->
    <Style x:Key="AtcApps.Styles.Flyout.CloseButton" TargetType="{x:Type Button}">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="BorderBrush" Value="Transparent" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="Focusable" Value="True" />
        <Setter Property="Height" Value="32" />
        <Setter Property="HorizontalContentAlignment" Value="Center" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Width" Value="32" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid Background="{TemplateBinding Background}">
                        <Ellipse
                            x:Name="HoverCircle"
                            Fill="{DynamicResource AtcApps.Brushes.Gray8}"
                            Opacity="0" />
                        <Path
                            x:Name="CloseIcon"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Data="M 0,0 L 10,10 M 0,10 L 10,0"
                            SnapsToDevicePixels="True"
                            Stroke="{DynamicResource AtcApps.Brushes.Gray2}"
                            StrokeThickness="1.5" />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="HoverCircle" Property="Opacity" Value="1" />
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="HoverCircle" Property="Fill" Value="{DynamicResource AtcApps.Brushes.Gray6}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="CloseIcon" Property="Stroke" Value="{DynamicResource AtcApps.Brushes.Gray6}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--  Main Flyout style  -->
    <Style x:Key="AtcApps.Styles.Flyout" TargetType="{x:Type flyouts:Flyout}">
        <Setter Property="Background" Value="{DynamicResource AtcApps.Brushes.ThemeBackground}" />
        <Setter Property="BorderBrush" Value="{DynamicResource AtcApps.Brushes.Gray8}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="CornerRadius" Value="0" />
        <Setter Property="Focusable" Value="True" />
        <Setter Property="FlyoutBackground" Value="{DynamicResource AtcApps.Brushes.ThemeBackground}" />
        <Setter Property="FlyoutBorderBrush" Value="{DynamicResource AtcApps.Brushes.Gray6}" />
        <Setter Property="FlyoutBorderThickness" Value="1,0,0,0" />
        <Setter Property="Foreground" Value="{DynamicResource AtcApps.Brushes.Text}" />
        <Setter Property="HeaderBackground" Value="{DynamicResource AtcApps.Brushes.ThemeBackground}" />
        <Setter Property="HeaderForeground" Value="{DynamicResource AtcApps.Brushes.Text}" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="KeyboardNavigation.TabNavigation" Value="Cycle" />
        <Setter Property="OverlayBrush" Value="#000000" />
        <Setter Property="Panel.ZIndex" Value="1000" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="VerticalAlignment" Value="Stretch" />
        <Setter Property="VerticalContentAlignment" Value="Stretch" />
        <Setter Property="Visibility" Value="Collapsed" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type flyouts:Flyout}">
                    <Grid>
                        <!--  Overlay (click to dismiss)  -->
                        <Border
                            x:Name="PART_Overlay"
                            Background="{TemplateBinding OverlayBrush}"
                            Opacity="0"
                            Visibility="Collapsed" />

                        <!--  Flyout Panel - Right Position (default)  -->
                        <Border
                            x:Name="PART_FlyoutPanel"
                            Width="{TemplateBinding FlyoutWidth}"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Stretch"
                            Background="{TemplateBinding FlyoutBackground}"
                            BorderBrush="{TemplateBinding FlyoutBorderBrush}"
                            BorderThickness="{TemplateBinding FlyoutBorderThickness}"
                            CornerRadius="{TemplateBinding CornerRadius}"
                            RenderTransformOrigin="1,0.5"
                            SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                            UseLayoutRounding="True">
                            <Border.RenderTransform>
                                <TranslateTransform x:Name="SlideTransform" />
                            </Border.RenderTransform>
                            <Border.Effect>
                                <DropShadowEffect
                                    BlurRadius="16"
                                    Direction="180"
                                    Opacity="0.2"
                                    ShadowDepth="4"
                                    Color="Black" />
                            </Border.Effect>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>

                                <!--  Resize Grip (Left edge for Right position)  -->
                                <Thumb
                                    x:Name="PART_ResizeGrip"
                                    Grid.Row="0"
                                    Grid.RowSpan="2"
                                    Grid.Column="0"
                                    Style="{StaticResource AtcApps.Styles.Flyout.ResizeGrip}"
                                    Visibility="Collapsed" />

                                <!--  Header  -->
                                <Border
                                    x:Name="HeaderBorder"
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    Background="{TemplateBinding HeaderBackground}"
                                    BorderBrush="{DynamicResource AtcApps.Brushes.Gray8}"
                                    BorderThickness="0,0,0,1"
                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                    UseLayoutRounding="True">
                                    <Grid MinHeight="48">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <ContentPresenter
                                            x:Name="HeaderContent"
                                            Grid.Column="0"
                                            Margin="16,8"
                                            HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                            VerticalAlignment="Center"
                                            Content="{TemplateBinding Header}"
                                            ContentTemplate="{TemplateBinding HeaderTemplate}"
                                            RecognizesAccessKey="True"
                                            SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                            TextElement.FontSize="16"
                                            TextElement.FontWeight="SemiBold"
                                            TextElement.Foreground="{TemplateBinding HeaderForeground}"
                                            UseLayoutRounding="False" />

                                        <StackPanel
                                            Grid.Column="1"
                                            Margin="4,8,12,8"
                                            Orientation="Horizontal">
                                            <ToggleButton
                                                x:Name="PART_PinButton"
                                                IsChecked="{Binding IsPinned, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                                Style="{StaticResource AtcApps.Styles.Flyout.PinButton}"
                                                Visibility="Collapsed" />
                                            <Button
                                                x:Name="PART_CloseButton"
                                                Style="{StaticResource AtcApps.Styles.Flyout.CloseButton}"
                                                ToolTip="Close" />
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!--  Content  -->
                                <ScrollViewer
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    HorizontalScrollBarVisibility="Disabled"
                                    VerticalScrollBarVisibility="Auto">
                                    <ContentPresenter
                                        x:Name="PART_ContentPresenter"
                                        Margin="{TemplateBinding Padding}"
                                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                        Content="{TemplateBinding Content}"
                                        ContentTemplate="{TemplateBinding ContentTemplate}"
                                        UseLayoutRounding="False" />
                                </ScrollViewer>
                            </Grid>
                        </Border>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <!--  Hide header when Header is null  -->
                        <Trigger Property="Header" Value="{x:Null}">
                            <Setter TargetName="HeaderBorder" Property="Visibility" Value="Collapsed" />
                        </Trigger>

                        <!--  Hide close button when ShowCloseButton is false  -->
                        <Trigger Property="ShowCloseButton" Value="False">
                            <Setter TargetName="PART_CloseButton" Property="Visibility" Value="Collapsed" />
                        </Trigger>

                        <!--  Show pin button when ShowPinButton is true  -->
                        <Trigger Property="ShowPinButton" Value="True">
                            <Setter TargetName="PART_PinButton" Property="Visibility" Value="Visible" />
                        </Trigger>

                        <!--  Show resize grip when IsResizable is true  -->
                        <Trigger Property="IsResizable" Value="True">
                            <Setter TargetName="PART_ResizeGrip" Property="Visibility" Value="Visible" />
                        </Trigger>

                        <!--  Left Position  -->
                        <Trigger Property="Position" Value="Left">
                            <Setter TargetName="PART_FlyoutPanel" Property="HorizontalAlignment" Value="Left" />
                            <Setter TargetName="PART_FlyoutPanel" Property="RenderTransformOrigin" Value="0,0.5" />
                            <Setter TargetName="PART_FlyoutPanel" Property="BorderThickness" Value="0,0,1,0" />
                            <Setter TargetName="PART_ResizeGrip" Property="Grid.Column" Value="1" />
                            <Setter TargetName="PART_ResizeGrip" Property="HorizontalAlignment" Value="Right" />
                            <Setter TargetName="HeaderBorder" Property="Grid.Column" Value="0" />
                            <Setter TargetName="PART_FlyoutPanel" Property="Effect">
                                <Setter.Value>
                                    <DropShadowEffect
                                        BlurRadius="16"
                                        Direction="0"
                                        Opacity="0.2"
                                        ShadowDepth="4"
                                        Color="Black" />
                                </Setter.Value>
                            </Setter>
                        </Trigger>

                        <!--  Top Position  -->
                        <Trigger Property="Position" Value="Top">
                            <Setter TargetName="PART_FlyoutPanel" Property="HorizontalAlignment" Value="Stretch" />
                            <Setter TargetName="PART_FlyoutPanel" Property="VerticalAlignment" Value="Top" />
                            <Setter TargetName="PART_FlyoutPanel" Property="Width" Value="Auto" />
                            <Setter TargetName="PART_FlyoutPanel" Property="Height" Value="{Binding FlyoutHeight, RelativeSource={RelativeSource TemplatedParent}}" />
                            <Setter TargetName="PART_FlyoutPanel" Property="RenderTransformOrigin" Value="0.5,0" />
                            <Setter TargetName="PART_FlyoutPanel" Property="BorderThickness" Value="0,0,0,1" />
                            <Setter TargetName="PART_ResizeGrip" Property="Grid.Row" Value="1" />
                            <Setter TargetName="PART_ResizeGrip" Property="Grid.RowSpan" Value="1" />
                            <Setter TargetName="PART_ResizeGrip" Property="Grid.Column" Value="0" />
                            <Setter TargetName="PART_ResizeGrip" Property="Grid.ColumnSpan" Value="2" />
                            <Setter TargetName="PART_ResizeGrip" Property="VerticalAlignment" Value="Bottom" />
                            <Setter TargetName="PART_ResizeGrip" Property="HorizontalAlignment" Value="Stretch" />
                            <Setter TargetName="PART_ResizeGrip" Property="Width" Value="Auto" />
                            <Setter TargetName="PART_ResizeGrip" Property="Height" Value="6" />
                            <Setter TargetName="PART_ResizeGrip" Property="Cursor" Value="SizeNS" />
                            <Setter TargetName="PART_FlyoutPanel" Property="Effect">
                                <Setter.Value>
                                    <DropShadowEffect
                                        BlurRadius="16"
                                        Direction="270"
                                        Opacity="0.2"
                                        ShadowDepth="4"
                                        Color="Black" />
                                </Setter.Value>
                            </Setter>
                        </Trigger>

                        <!--  Bottom Position  -->
                        <Trigger Property="Position" Value="Bottom">
                            <Setter TargetName="PART_FlyoutPanel" Property="HorizontalAlignment" Value="Stretch" />
                            <Setter TargetName="PART_FlyoutPanel" Property="VerticalAlignment" Value="Bottom" />
                            <Setter TargetName="PART_FlyoutPanel" Property="Width" Value="Auto" />
                            <Setter TargetName="PART_FlyoutPanel" Property="Height" Value="{Binding FlyoutHeight, RelativeSource={RelativeSource TemplatedParent}}" />
                            <Setter TargetName="PART_FlyoutPanel" Property="RenderTransformOrigin" Value="0.5,1" />
                            <Setter TargetName="PART_FlyoutPanel" Property="BorderThickness" Value="0,1,0,0" />
                            <Setter TargetName="PART_ResizeGrip" Property="Grid.Row" Value="0" />
                            <Setter TargetName="PART_ResizeGrip" Property="Grid.RowSpan" Value="1" />
                            <Setter TargetName="PART_ResizeGrip" Property="Grid.Column" Value="0" />
                            <Setter TargetName="PART_ResizeGrip" Property="Grid.ColumnSpan" Value="2" />
                            <Setter TargetName="PART_ResizeGrip" Property="VerticalAlignment" Value="Top" />
                            <Setter TargetName="PART_ResizeGrip" Property="HorizontalAlignment" Value="Stretch" />
                            <Setter TargetName="PART_ResizeGrip" Property="Width" Value="Auto" />
                            <Setter TargetName="PART_ResizeGrip" Property="Height" Value="6" />
                            <Setter TargetName="PART_ResizeGrip" Property="Cursor" Value="SizeNS" />
                            <Setter TargetName="PART_FlyoutPanel" Property="Effect">
                                <Setter.Value>
                                    <DropShadowEffect
                                        BlurRadius="16"
                                        Direction="90"
                                        Opacity="0.2"
                                        ShadowDepth="4"
                                        Color="Black" />
                                </Setter.Value>
                            </Setter>
                        </Trigger>

                        <!--  Center Position  -->
                        <Trigger Property="Position" Value="Center">
                            <Setter TargetName="PART_FlyoutPanel" Property="HorizontalAlignment" Value="Center" />
                            <Setter TargetName="PART_FlyoutPanel" Property="VerticalAlignment" Value="Center" />
                            <Setter TargetName="PART_FlyoutPanel" Property="Width" Value="{Binding FlyoutWidth, RelativeSource={RelativeSource TemplatedParent}}" />
                            <Setter TargetName="PART_FlyoutPanel" Property="Height" Value="{Binding FlyoutHeight, RelativeSource={RelativeSource TemplatedParent}}" />
                            <Setter TargetName="PART_FlyoutPanel" Property="RenderTransformOrigin" Value="0.5,0.5" />
                            <Setter TargetName="PART_FlyoutPanel" Property="BorderThickness" Value="1" />
                            <Setter TargetName="PART_FlyoutPanel" Property="CornerRadius" Value="{Binding CornerRadius, RelativeSource={RelativeSource TemplatedParent}}" />
                            <Setter TargetName="PART_ResizeGrip" Property="Visibility" Value="Collapsed" />
                            <Setter TargetName="PART_FlyoutPanel" Property="Effect">
                                <Setter.Value>
                                    <DropShadowEffect
                                        BlurRadius="24"
                                        Direction="270"
                                        Opacity="0.3"
                                        ShadowDepth="8"
                                        Color="Black" />
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--  FlyoutPresenter style  -->
    <Style x:Key="AtcApps.Styles.FlyoutPresenter" TargetType="{x:Type flyouts:FlyoutPresenter}">
        <Setter Property="Background" Value="{DynamicResource AtcApps.Brushes.ThemeBackground}" />
        <Setter Property="BorderBrush" Value="{DynamicResource AtcApps.Brushes.Gray8}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Foreground" Value="{DynamicResource AtcApps.Brushes.Text}" />
        <Setter Property="HeaderBackground" Value="{DynamicResource AtcApps.Brushes.ThemeBackground}" />
        <Setter Property="HeaderForeground" Value="{DynamicResource AtcApps.Brushes.Text}" />
        <Setter Property="FooterBackground" Value="{DynamicResource AtcApps.Brushes.ThemeBackground}" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="SeparatorBrush" Value="{DynamicResource AtcApps.Brushes.Gray8}" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="VerticalAlignment" Value="Stretch" />
        <Setter Property="VerticalContentAlignment" Value="Stretch" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type flyouts:FlyoutPresenter}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="{TemplateBinding CornerRadius}"
                        SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <!--  Header  -->
                            <ContentPresenter
                                x:Name="PART_Header"
                                Grid.Row="0"
                                Margin="{TemplateBinding HeaderPadding}"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="Center"
                                Content="{TemplateBinding Header}"
                                ContentTemplate="{TemplateBinding HeaderTemplate}"
                                TextElement.FontSize="16"
                                TextElement.FontWeight="SemiBold"
                                TextElement.Foreground="{TemplateBinding HeaderForeground}" />

                            <!--  Header Separator  -->
                            <Rectangle
                                x:Name="HeaderSeparator"
                                Grid.Row="1"
                                Height="{TemplateBinding SeparatorThickness}"
                                Fill="{TemplateBinding SeparatorBrush}" />

                            <!--  Content  -->
                            <ScrollViewer
                                x:Name="PART_ScrollViewer"
                                Grid.Row="2"
                                HorizontalScrollBarVisibility="{TemplateBinding HorizontalScrollBarVisibility}"
                                VerticalScrollBarVisibility="{TemplateBinding VerticalScrollBarVisibility}">
                                <ContentPresenter
                                    x:Name="PART_Content"
                                    Margin="{TemplateBinding ContentPadding}"
                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                    Content="{TemplateBinding Content}"
                                    ContentTemplate="{TemplateBinding ContentTemplate}" />
                            </ScrollViewer>

                            <!--  Footer Separator  -->
                            <Rectangle
                                x:Name="FooterSeparator"
                                Grid.Row="3"
                                Height="{TemplateBinding SeparatorThickness}"
                                Fill="{TemplateBinding SeparatorBrush}" />

                            <!--  Footer  -->
                            <Border
                                x:Name="FooterBorder"
                                Grid.Row="4"
                                Background="{TemplateBinding FooterBackground}">
                                <ContentPresenter
                                    x:Name="PART_Footer"
                                    Margin="{TemplateBinding FooterPadding}"
                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                    VerticalAlignment="Center"
                                    Content="{TemplateBinding Footer}"
                                    ContentTemplate="{TemplateBinding FooterTemplate}" />
                            </Border>
                        </Grid>
                    </Border>

                    <ControlTemplate.Triggers>
                        <!--  Hide header when not visible  -->
                        <Trigger Property="ShowHeader" Value="False">
                            <Setter TargetName="PART_Header" Property="Visibility" Value="Collapsed" />
                            <Setter TargetName="HeaderSeparator" Property="Visibility" Value="Collapsed" />
                        </Trigger>

                        <!--  Hide header when Header is null  -->
                        <Trigger Property="Header" Value="{x:Null}">
                            <Setter TargetName="PART_Header" Property="Visibility" Value="Collapsed" />
                            <Setter TargetName="HeaderSeparator" Property="Visibility" Value="Collapsed" />
                        </Trigger>

                        <!--  Hide header separator when not visible  -->
                        <Trigger Property="ShowHeaderSeparator" Value="False">
                            <Setter TargetName="HeaderSeparator" Property="Visibility" Value="Collapsed" />
                        </Trigger>

                        <!--  Hide footer when not visible  -->
                        <Trigger Property="ShowFooter" Value="False">
                            <Setter TargetName="FooterBorder" Property="Visibility" Value="Collapsed" />
                            <Setter TargetName="FooterSeparator" Property="Visibility" Value="Collapsed" />
                        </Trigger>

                        <!--  Hide footer when Footer is null  -->
                        <Trigger Property="Footer" Value="{x:Null}">
                            <Setter TargetName="FooterBorder" Property="Visibility" Value="Collapsed" />
                            <Setter TargetName="FooterSeparator" Property="Visibility" Value="Collapsed" />
                        </Trigger>

                        <!--  Hide footer separator when not visible  -->
                        <Trigger Property="ShowFooterSeparator" Value="False">
                            <Setter TargetName="FooterSeparator" Property="Visibility" Value="Collapsed" />
                        </Trigger>

                        <!--  Disable scrolling when IsContentScrollable is false  -->
                        <Trigger Property="IsContentScrollable" Value="False">
                            <Setter TargetName="PART_ScrollViewer" Property="VerticalScrollBarVisibility" Value="Disabled" />
                            <Setter TargetName="PART_ScrollViewer" Property="HorizontalScrollBarVisibility" Value="Disabled" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--  Implicit styles  -->
    <Style BasedOn="{StaticResource AtcApps.Styles.Flyout}" TargetType="{x:Type flyouts:Flyout}" />
    <Style BasedOn="{StaticResource AtcApps.Styles.FlyoutPresenter}" TargetType="{x:Type flyouts:FlyoutPresenter}" />

</ResourceDictionary>
