<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:progressing="clr-namespace:Atc.Wpf.Controls.Progressing">

    <!--  Shimmer Template  -->
    <ControlTemplate x:Key="AtcApps.Templates.SkeletonElement.Shimmer" TargetType="{x:Type progressing:SkeletonElement}">
        <Border
            x:Name="PART_Root"
            Height="{TemplateBinding Height}"
            MinHeight="16"
            Background="{DynamicResource AtcApps.Brushes.Gray8}"
            ClipToBounds="True"
            CornerRadius="{TemplateBinding CornerRadius}">
            <Border x:Name="PART_Shimmer" CornerRadius="{TemplateBinding CornerRadius}">
                <Border.Background>
                    <LinearGradientBrush SpreadMethod="Pad" StartPoint="0,0.5" EndPoint="1,0.5">
                        <GradientStop x:Name="Stop0" Offset="-1.0" Color="Transparent" />
                        <GradientStop x:Name="Stop1" Offset="-0.5" Color="#40FFFFFF" />
                        <GradientStop x:Name="Stop2" Offset="0.0" Color="Transparent" />
                    </LinearGradientBrush>
                </Border.Background>
            </Border>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsActive" Value="True">
                <Trigger.EnterActions>
                    <BeginStoryboard x:Name="ShimmerStoryboard">
                        <Storyboard RepeatBehavior="Forever">
                            <DoubleAnimation
                                Storyboard.TargetName="Stop0"
                                Storyboard.TargetProperty="Offset"
                                From="-1.0"
                                To="2.0"
                                Duration="0:0:1.5" />
                            <DoubleAnimation
                                Storyboard.TargetName="Stop1"
                                Storyboard.TargetProperty="Offset"
                                From="-0.5"
                                To="2.5"
                                Duration="0:0:1.5" />
                            <DoubleAnimation
                                Storyboard.TargetName="Stop2"
                                Storyboard.TargetProperty="Offset"
                                From="0.0"
                                To="3.0"
                                Duration="0:0:1.5" />
                        </Storyboard>
                    </BeginStoryboard>
                </Trigger.EnterActions>
                <Trigger.ExitActions>
                    <StopStoryboard BeginStoryboardName="ShimmerStoryboard" />
                </Trigger.ExitActions>
            </Trigger>
            <Trigger Property="Shape" Value="Circle">
                <Setter TargetName="PART_Root" Property="CornerRadius" Value="999" />
                <Setter TargetName="PART_Shimmer" Property="CornerRadius" Value="999" />
                <Setter Property="Width" Value="{Binding ActualHeight, RelativeSource={RelativeSource Self}}" />
            </Trigger>
            <Trigger Property="Shape" Value="Rectangle">
                <Setter TargetName="PART_Root" Property="CornerRadius" Value="0" />
                <Setter TargetName="PART_Shimmer" Property="CornerRadius" Value="0" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <!--  Pulse Template  -->
    <ControlTemplate x:Key="AtcApps.Templates.SkeletonElement.Pulse" TargetType="{x:Type progressing:SkeletonElement}">
        <Border
            x:Name="PART_Root"
            Height="{TemplateBinding Height}"
            MinHeight="16"
            Background="{DynamicResource AtcApps.Brushes.Gray8}"
            CornerRadius="{TemplateBinding CornerRadius}" />
        <ControlTemplate.Triggers>
            <Trigger Property="IsActive" Value="True">
                <Trigger.EnterActions>
                    <BeginStoryboard x:Name="PulseStoryboard">
                        <Storyboard RepeatBehavior="Forever">
                            <DoubleAnimation
                                AutoReverse="True"
                                Storyboard.TargetName="PART_Root"
                                Storyboard.TargetProperty="Opacity"
                                From="1.0"
                                To="0.4"
                                Duration="0:0:1.0" />
                        </Storyboard>
                    </BeginStoryboard>
                </Trigger.EnterActions>
                <Trigger.ExitActions>
                    <StopStoryboard BeginStoryboardName="PulseStoryboard" />
                </Trigger.ExitActions>
            </Trigger>
            <Trigger Property="Shape" Value="Circle">
                <Setter TargetName="PART_Root" Property="CornerRadius" Value="999" />
                <Setter Property="Width" Value="{Binding ActualHeight, RelativeSource={RelativeSource Self}}" />
            </Trigger>
            <Trigger Property="Shape" Value="Rectangle">
                <Setter TargetName="PART_Root" Property="CornerRadius" Value="0" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <!--  None Template (static, no animation)  -->
    <ControlTemplate x:Key="AtcApps.Templates.SkeletonElement.None" TargetType="{x:Type progressing:SkeletonElement}">
        <Border
            x:Name="PART_Root"
            Height="{TemplateBinding Height}"
            MinHeight="16"
            Background="{DynamicResource AtcApps.Brushes.Gray8}"
            CornerRadius="{TemplateBinding CornerRadius}" />
        <ControlTemplate.Triggers>
            <Trigger Property="Shape" Value="Circle">
                <Setter TargetName="PART_Root" Property="CornerRadius" Value="999" />
                <Setter Property="Width" Value="{Binding ActualHeight, RelativeSource={RelativeSource Self}}" />
            </Trigger>
            <Trigger Property="Shape" Value="Rectangle">
                <Setter TargetName="PART_Root" Property="CornerRadius" Value="0" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <!--  Base Style  -->
    <Style x:Key="AtcApps.Styles.SkeletonElement" TargetType="{x:Type progressing:SkeletonElement}">
        <Setter Property="Height" Value="16" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="Focusable" Value="False" />
        <Setter Property="Template" Value="{StaticResource AtcApps.Templates.SkeletonElement.Shimmer}" />
        <Style.Triggers>
            <Trigger Property="AnimationType" Value="Shimmer">
                <Setter Property="Template" Value="{StaticResource AtcApps.Templates.SkeletonElement.Shimmer}" />
            </Trigger>
            <Trigger Property="AnimationType" Value="Pulse">
                <Setter Property="Template" Value="{StaticResource AtcApps.Templates.SkeletonElement.Pulse}" />
            </Trigger>
            <Trigger Property="AnimationType" Value="None">
                <Setter Property="Template" Value="{StaticResource AtcApps.Templates.SkeletonElement.None}" />
            </Trigger>
        </Style.Triggers>
    </Style>

</ResourceDictionary>
